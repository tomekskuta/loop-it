(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e){e.exports={ok:"ok",cancel:"cancel"}},154:function(e){e.exports={newListHeader:"New list",Name:"Name","Cycle length":"Cycle length",periods:{days:"days",weeks:"weeks",months:"months"},"Cycle start":"Cycle start",add:"add","fields required":"fields required","Next cycle in":"Next cycle in","delete list":"delete list","Are you sure?":"Are you sure?",delete:"delete","do something":"do something"}},155:function(e){e.exports={cancel:"anuluj"}},156:function(e){e.exports={newListHeader:"Nowa lista",Name:"Nazwa","Cycle length":"D\u0142ugo\u015b\u0107 cyklu",periods:{days:"dni",weeks:"tygodni",months:"miesi\u0119cy"},"Cycle start":"Start cyklu",add:"dodaj","fields required":"pola wymagane","Next cycle in":"Nast\u0119pny cykl za","delete list":"usu\u0144 list\u0119","Are you sure?":"Jeste\u015b pewien?",delete:"usu\u0144","do something":"zr\xf3b co\u015b"}},235:function(e,t,n){e.exports=n(427)},427:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),l=n.n(i),c=n(28),u=n(9),o=n(49),s=n(19),d=n(151),f=n.n(d),m=n(152),v=n.n(m),b={en:{general:n(153),lists:n(154)},pl:{general:n(155),lists:n(156)}};o.a.use(f.a).use(v.a).use(s.a).init({resources:b,fallbackLng:"en",defaultNS:"general",debug:!0,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"lang"}},function(e){e&&console.log(e);var t=function(e){return"en"===e||"pl"===e},n=o.a.language;if(!t(n)){var a=n.split("-")[0],r=function(e){return o.a.changeLanguage(e)};return t(a)?r(a):r("en")}});o.a;var g=n(157),p=n(159),h=n(160),y=n.n(h),E=n(33),k=n(39),w=n(64),O=n.n(w),j=n(26),L=n.n(j),x=n(97),D=n.n(x),C=n(161),S=n.n(C),T=n(162),N=n.n(T),P=function(e){return e&&0!==e.length?Math.max.apply(Math,Object(E.a)(e.map(function(e){return e.id})))+1:1},I=function(){return L()(new Date)},M=function(e,t){var n=t.count,a=t.period,r=e;return function e(){O()(r)||(r="D"===a?D()(r,n):"W"===a?S()(r,n):"M"===a?N()(r,n):void 0,e())}(),L()(r)},Y=function(e){var t=e.id,n=e.name,a=(e.loopIt,e.color,e.startDate),r=e.cycleLength,i=(e.cycleEnd,e.nextCycleStart);return{id:t,name:n,created_at:I(),updated_at:I(),cycleLength:r,startDate:a,nextCycleStart:i,tasks:[]}},q=function(e){return{id:e.id,text:e.text,created_at:I(),updated_at:I(),done:!1}},B=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},A={state:[],reducers:{getLists:function(){var e,t=(e="lists",JSON.parse(localStorage.getItem(e))||[]).map(function(e){var t=e.nextCycleStart,n=e.tasks;if(!O()(t)){var a=n.map(function(e){return Object(k.a)({},e,{done:!1})});return Object(k.a)({},e,{nextCycleStart:M(t,e.cycleLength),tasks:a,updated_at:I()})}return e});return B("lists",t),t},addList:function(e,t){var n=P(e),a=M(t.startDate,t.cycleLength),r=[new Y(Object(k.a)({id:n},t,{nextCycleStart:a}))].concat(Object(E.a)(e));return B("lists",r),r},editList:function(e,t){var n=t.id,a=t.editedProperty,r=t.value,i=e.find(function(e){return e.id===n});"string"===typeof a?i[a]=r:i[a[0]][a[1]]=r,i.updated_at=I();var l=e.map(function(e){return e.id===n?i:e});return B("lists",l),l},deleteList:function(e,t){var n=e.filter(function(e){return e.id!==t});return B("lists",n),n},addTask:function(e,t){var n=e.find(function(e){return e.id===t.listId}),a=P(n.tasks),r=new q({id:a,text:t.text}),i=Object(E.a)(n.tasks).concat([r]),l=Object(k.a)({},n,{tasks:i,updated_at:I()}),c=e.map(function(e){return e.id===t.listId?l:e});return B("lists",c),c},editTask:function(e,t){var n=t.value,a=t.editedProperty,r=t.taskId,i=t.listId,l=e.find(function(e){return e.id===i}),c=l.tasks.find(function(e){return e.id===r});c.updated_at=I(),c[a]=n;var u=l.tasks.map(function(e){return e.id===r?c:e}),o=Object(k.a)({},l,{tasks:u,updated_at:I()}),s=e.map(function(e){return e.id===i?o:e});return B("lists",s),s},deleteTask:function(e,t){var n=t.taskId,a=t.listId,r=e.find(function(e){return e.id===a});r.tasks=r.tasks.filter(function(e){return e.id!==n});var i=e.map(function(e){return e.id===a?r:e});return B("lists",i),i}}},W={state:0,reducers:{openList:function(e,t){return t}},effects:function(e){return{}}},_=Object(p.init)({redux:{middlewares:[y.a]},models:{lists:A,openedList:W}}),z=n(10);function V(){var e=Object(z.a)(['\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n      "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n      monospace;\n  }\n']);return V=function(){return e},e}var F=Object(u.createGlobalStyle)(V()),J={},U=n(16),H=n(163),R=n.n(H),G=n(62),$=n.n(G),K=n(164),Q=n.n(K),X=n(5),Z=n(167),ee=n.n(Z),te=n(166),ne=n.n(te),ae=n(165),re=n.n(ae);function ie(){var e=Object(z.a)(["\n  width: 100%;\n  text-align: center;\n"]);return ie=function(){return e},e}function le(){var e=Object(z.a)(["\n  display: flex;\n  align-items: flex-start;\n  position: absolute;\n  right: 1em;\n"]);return le=function(){return e},e}function ce(){var e=Object(z.a)(["\n  position: absolute;\n  left: 1em;\n"]);return ce=function(){return e},e}function ue(){var e=Object(z.a)(["\n  display: flex;\n  align-items: center;\n"]);return ue=function(){return e},e}var oe=u.default.div(ue()),se=u.default.div(ce()),de=u.default.div(le()),fe=u.default.h2(ie()),me=function(e){var t=e.showNewList,n=e.newListButtonDisabled,a=Object(s.b)(),i=Object(U.a)(a,2)[1];return r.a.createElement(X.a,{color:"default",position:"relative"},r.a.createElement(oe,null,r.a.createElement(se,null,r.a.createElement(X.m,{disabled:n,onClick:t},r.a.createElement(re.a,null))),r.a.createElement(fe,null,"Loop it"),r.a.createElement(de,null,function(e){return["en","pl"].map(function(t){return r.a.createElement(X.b,{key:t,size:"small",onClick:function(){return e.changeLanguage(t)},variant:e.language===t?"outlined":"text"},t)})}(i))))};function ve(){var e=Object(z.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return ve=function(){return e},e}function be(){var e=Object(z.a)(["\n  height: 100%;\n  flex-grow: 1;\n  padding: 2em;\n"]);return be=function(){return e},e}function ge(){var e=Object(z.a)(["\n  width: 100vw;\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n"]);return ge=function(){return e},e}var pe=u.default.div(ge(),function(e){var t=e.theme;return t.colors?t.colors.mainBackground:"#fff"}),he=u.default.div(be()),ye=u.default.div(ve()),Ee=function(e){var t=e.children,n=e.showNewList,a=e.newListButtonDisabled;return r.a.createElement(pe,null,r.a.createElement(me,{showNewList:n,newListButtonDisabled:a}),r.a.createElement(he,null,r.a.createElement(ye,null,t)))};function ke(){var e=Object(z.a)(["\n  margin-top: 1em;\n"]);return ke=function(){return e},e}function we(){var e=Object(z.a)(["\n  cursor: default;\n  margin: 1em;\n"]);return we=function(){return e},e}var Oe=Object(u.default)(X.c)(we()),je=u.default.div(ke()),Le=function(e){var t=e.children,n=e.title,a=e.subheader,i=e.actionButton;return r.a.createElement(Oe,null,r.a.createElement(X.e,{title:n,subheader:r.a.createElement(je,null,a),action:i}),r.a.createElement(X.d,null,t))};Le.defaultProps={subheader:null,action:null};var xe=Le,De=function(e){var t=e.open,n=e.onClose,a=e.onSubmit,i=e.title,l=e.contentText,c=e.submitText,u=e.cancelText,o=Object(s.b)(),d=Object(U.a)(o,1)[0];return r.a.createElement(X.g,{open:t,onClose:n},i&&r.a.createElement(X.k,null,i),r.a.createElement(X.i,null,r.a.createElement(X.j,null,l)),r.a.createElement(X.h,null,r.a.createElement(X.b,{onClick:function(){a&&a(),n()}},c||d("ok")),a&&r.a.createElement(X.b,{onClick:n},u||d("cancel"))))};De.defaultProps={onSubmit:null,title:"",submitText:"",cancelText:""};var Ce=De;function Se(){var e=Object(z.a)(["\n  padding: 0.5em 0 !important;\n"]);return Se=function(){return e},e}var Te=Object(u.default)(X.p)(Se()),Ne=function(e){var t=e.addTask,n=Object(s.b)("lists"),a=Object(U.a)(n,1)[0];return r.a.createElement(Te,null,r.a.createElement("form",{onSubmit:t},r.a.createElement(X.b,{type:"submit",size:"small"},"+"),r.a.createElement(X.n,{name:"text",placeholder:"".concat(a("do something"),"..."),required:!0})))},Pe=n(65),Ie=n.n(Pe);function Me(){var e=Object(z.a)(["\n  ",":hover & {\n    visibility: visible;\n  }\n"]);return Me=function(){return e},e}function Ye(){var e=Object(z.a)(["\n  width: 120px;\n"]);return Ye=function(){return e},e}function qe(){var e=Object(z.a)(["\n  display: flex;\n"]);return qe=function(){return e},e}function Be(){var e=Object(z.a)(["\n  &:first-child {\n    padding: 0.5em 0;\n  }\n"]);return Be=function(){return e},e}var Ae=Object(u.default)(X.p)(Be()),We=Object(u.default)(X.q)(qe()),_e=Object(u.default)(X.n)(Ye()),ze=Object(u.default)(X.m)(Me(),Ae),Ve=function(e){var t=e.task,n=e.setDone,a=e.changeText,i=e.deleteTask,l=t.text,c=t.done;return r.a.createElement(Ae,null,r.a.createElement(X.f,{checked:c,onChange:n}),r.a.createElement(We,null,r.a.createElement("form",{onSubmit:a},r.a.createElement(_e,{defaultValue:l,name:"text",required:!0})),r.a.createElement(ze,{onClick:i},r.a.createElement(Ie.a,null))))};function Fe(){var e=Object(z.a)(["\n  margin-left: 1em;\n"]);return Fe=function(){return e},e}function Je(){var e=Object(z.a)(["\n  margin: ","em 0 1em;\n"]);return Je=function(){return e},e}var Ue=Object(u.default)(X.l)(Je(),function(e){return e.margin||1}),He=Object(u.default)(Ie.a)(Fe()),Re=function(e){var t=e.deleteList,n=e.periodOptions,i=e.cycleLength,l=e.setCycleLength,c=e.currentPeriod,u=e.setPeriod,o=e.startDate,d=e.setStartDate,f=Object(s.b)("lists"),m=Object(U.a)(f,1)[0];return r.a.createElement(a.Fragment,null,r.a.createElement(Ue,{row:!0},r.a.createElement(X.s,{name:"cycleLength",label:m("Cycle length"),type:"number",defaultValue:i,inputProps:{min:1,step:1},onChange:l}),r.a.createElement(X.r,{value:c,onChange:u,native:!0},n)),r.a.createElement(Ue,null,r.a.createElement(X.s,{name:"startDate",type:"date",label:m("Cycle start"),defaultValue:L()(o,"YYYY-MM-DD"),required:!0,onChange:d})),r.a.createElement(Ue,{margin:"3"},r.a.createElement(X.b,{variant:"outlined",onClick:t},m("delete list"),r.a.createElement(He,null))))},Ge=[{value:"D",label:"days"},{value:"W",label:"weeks"},{value:"M",label:"months"}],$e={en:$.a,pl:Q.a},Ke=Object(c.b)(null,function(e){return{editList:e.lists.editList,addTask:e.lists.addTask,deleteTask:e.lists.deleteTask,editTask:e.lists.editTask,deleteList:e.lists.deleteList}})(function(e){var t=e.list,n=e.tasks,i=e.addTask,l=e.editTask,c=e.deleteTask,u=e.editList,o=e.deleteList,d=t.id,f=t.name,m=t.cycleLength,v=t.nextCycleStart,b=t.startDate,g=Object(s.b)("lists"),p=Object(U.a)(g,2),h=p[0],y=p[1],E=Object(a.useState)(!1),k=Object(U.a)(E,2),w=k[0],O=k[1],j=Object(a.useState)(!1),L=Object(U.a)(j,2),x=L[0],D=L[1],C=!("D"===m.period&&"1"===m.count)&&"".concat(h("Next cycle in")," ").concat(R()(new Date,v,{locale:$e[y.language]})),S=function(e,t){return u({id:d,editedProperty:t,value:e})},T=function(e){c({taskId:e,listId:d})},N=Ge.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},h("periods.".concat(e.label)))});return r.a.createElement(xe,{title:r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),S(e.target.name.value,"name")}},r.a.createElement(X.n,{defaultValue:f,name:"name",required:!0})),subheader:C,actionButton:r.a.createElement(X.m,{onClick:function(){return O(!w)}},w?r.a.createElement(ne.a,null):r.a.createElement(ee.a,null))},w?r.a.createElement(Re,{deleteList:function(){return D(!0)},periodOptions:N,cycleLength:m.count,setCycleLength:function(e){return S(e.target.value,["cycleLength","count"])},currentPeriod:m.period,setPeriod:function(e){return S(e.target.value,["cycleLength","period"])},startDate:b,setStartDate:function(e){return S(e.target.value,"startDate")}}):r.a.createElement(X.o,{disablePadding:!0},n.map(function(e){return r.a.createElement(Ve,{key:e.id,task:e,setDone:function(t,n){return a=n,r=e.id,void l({editedProperty:"done",value:a,taskId:r,listId:d});var a,r},changeText:function(t){return function(e,t){e.preventDefault();var n={editedProperty:"text",value:e.target.text.value,taskId:t,listId:d};l(n)}(t,e.id)},deleteTask:function(){return T(e.id)}})}),r.a.createElement(Ne,{addTask:function(e){e.preventDefault();var t={listId:d,text:e.target.text.value};i(t),e.target.text.value=""}})),r.a.createElement(Ce,{open:x,onClose:function(){return D(!1)},onSubmit:function(){return o(d)},contentText:h("Are you sure?"),submitText:h("delete")}))});function Qe(){var e=Object(z.a)(["\n  margin: 1em 0;\n"]);return Qe=function(){return e},e}var Xe=Object(u.default)(X.l)(Qe()),Ze=function(e){var t=e.submit,n=e.periodOptions,a=e.currentPeriod,i=e.setPeriod,l=Object(s.b)("lists"),c=Object(U.a)(l,1)[0];return r.a.createElement("form",{onSubmit:t},r.a.createElement(Xe,null,r.a.createElement(X.s,{autoFocus:!0,name:"name",label:c("Name"),required:!0})),r.a.createElement(Xe,{row:!0},r.a.createElement(X.s,{name:"cycleLength",label:c("Cycle length"),type:"number",defaultValue:1,inputProps:{min:1,step:1}}),r.a.createElement(X.r,{value:a,onChange:i,native:!0},n)),r.a.createElement(Xe,null,r.a.createElement(X.s,{name:"startDate",type:"date",label:c("Cycle start"),defaultValue:L()(new Date,"YYYY-MM-DD"),required:!0})),r.a.createElement(X.l,null,r.a.createElement(X.b,{type:"submit",variant:"outlined"},c("add"))),r.a.createElement("p",null,"* - ",c("fields required")))},et=Object(c.b)(function(e){return{}},function(e){return{addList:e.lists.addList}})(function(e){var t=e.addList,n=Object(s.b)("lists"),i=Object(U.a)(n,1)[0],l=Object(a.useState)("D"),c=Object(U.a)(l,2),u=c[0],o=c[1],d=Ge.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},i("periods.".concat(e.label)))});return r.a.createElement(xe,{title:i("newListHeader")},r.a.createElement(Ze,{submit:function(e){e.preventDefault();var n={name:e.target.name.value,cycleLength:{count:e.target.cycleLength.value,period:u},startDate:e.target.startDate.value};t(n),function(e){e.target.name.value="",e.target.cycleLength.value=1,o("D"),e.target.startDate.value=L()(new Date,"YYYY-MM-DD")}(e)},currentPeriod:u,setPeriod:function(e){return o(e.target.value)},periodOptions:d}))}),tt=Object(c.b)(function(e){return{lists:e.lists}},function(e){return{getLists:e.lists.getLists}})(function(e){var t=e.lists,n=e.getLists,i=Object(a.useState)(!1),l=Object(U.a)(i,2),c=l[0],u=l[1];Object(a.useEffect)(n,[]);var o=function(){return u(!1)},s=function(){return c||0===t.length};return r.a.createElement(Ee,{showNewList:function(){return u(!0)},newListButtonDisabled:s()},function(){var e=t.map(function(e){return r.a.createElement(Ke,{key:e.id,list:e,tasks:e.tasks})});return s()?[r.a.createElement(et,{key:"newList",hideNewList:o})].concat(Object(E.a)(e)):e}())}),nt=function(){return r.a.createElement(c.a,{store:_},r.a.createElement(u.ThemeProvider,{theme:J},r.a.createElement(a.Fragment,null,r.a.createElement(g.Normalize,null),r.a.createElement(F,null),r.a.createElement(tt,null))))},at=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(nt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/loop-it",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/loop-it","/service-worker.js");at?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):rt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):rt(t,e)})}}()}},[[235,2,1]]]);
//# sourceMappingURL=main.289a6a62.chunk.js.map